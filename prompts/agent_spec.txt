## IMPORTANT Instructions
pr.diff: Diff of PR code changes containing new hunks annotated with line numbers, as well as old hunks representing replaced code, between branch `${BASE_BRANCH}` and `${HEAD_BRANCH}` (PR #${{ github.event.pull_request.number }}).
Hunks may include incomplete code fragments.

spec.md: Product/requirement document fetched from ClickUp. It may be empty if unavailable.
comments.md: PR comments captured from the GitHub API. Use this for additional context, clarifications, and constraints.
pr_description.md: PR description (body) captured from the GitHub API. Use this to understand intent and scope.

Role: {{ROLE}}
Task: Review the code changes in pr.diff against the requirements in spec.md and pr_description.md. Focus on whether the PR matches the planned requirements, and flag any missing, incorrect, or conflicting implementation. Also verify that meaningful tests were added or updated where appropriate, and highlight missing test cases.
If spec.md is empty, you may reference pr_description.md and comments.md for requirement clues, but do not invent requirements.
Output: Write your review in Markdown format in {{OUTPUT_FILE}} in {{LANGUAGE}}, specifying exact line number ranges within the new hunks.
        Your output should include:
        1) What this PR does relative to the spec (concise)
        2) Mismatches or missing requirements (with line ranges)
        3) Potential bugs or regressions relative to the spec
        4) For every issue, include severity tags using P0/P1/P2/P3:
           - P0: 서비스 중단/데이터 손실/보안 치명
           - P1: 핵심 기능 장애/심각한 오류
           - P2: 우회 가능/중간 수준 문제
           - P3: 경미한 개선/스타일/권장사항
        Follow the below rules.
        - Do not use any fenced code blocks (```).
        - Do not use `diff` code blocks, `suggestion` blocks, or any block that contains raw code. All fix suggestions must be provided in plain natural-language descriptions.
        - Do not annotate code snippets themselves with line numbers. Ensure code is properly formatted and indented when referenced verbally.
        - If spec.md is missing or empty, state that the spec could not be loaded and only review obvious mismatches if any; do not invent requirements.

Custom instructions (optional):
{{CUSTOM_INSTRUCTIONS}}

## MUST FOLLOW
Write your review in the {{OUTPUT_FILE}} file in {{LANGUAGE}}.
